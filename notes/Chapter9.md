## 第九章 顺序容器

**声明:**
本文为《C++ Primer 中文版（第五版）》学习笔记。
原书更为详细，本文仅作学习交流使用。

P292-P332

顺序容器为程序员提供了控制元素存储和访问顺序的能力。

### 9.1 顺序容器概述

| 类型         | 作用                                                         |
| ------------ | ------------------------------------------------------------ |
| vector       | 可变数组大小。支持快速随机访问。在尾部之外的位置插入或删除元素可能很慢。 |
| deque        | 双端队列。支持快速随机访问。在头尾位置插入/删除速度很快。    |
| list         | 双向链表。只支持双向顺序访问。在list中任何位置进行插入/删除操作速度都很快。 |
| forward_list | 单向链表。只支持单向顺序访问。在链表任何位置进行插入/删除操作速度都很快。 |
| array        | 固定大小数组。支持快速随机访问。不能添加或删除元素。         |
| string       | 与vector相似的容器，但专门用于保存字符、随机访问快。在尾部插入/删除速度快。 |

### 9.2 容器库概述

一般，每个容器都定义在一个头文件中。

容器均定义为模板类。

| 类型别名        |                                                        |
| --------------- | ------------------------------------------------------ |
| iterator        | 此容器类型的迭代器类型                                 |
| const_iterator  | 可以读取元素，但不能修改元素的迭代器类型               |
| size_type       | 无符号整数类型，足够保存此种容器类型最大可能容器的大小 |
| difference_type | 带符号整数类型，足够保存两个迭代器之间的距离           |
| value_type      | 元素类型                                               |
| reference       | 元素的左值诶性：与value_type&含义相同                  |
| const_reference | 元素的const左值类型（即，const value_type&）           |

| 构造函数        |                                                             |
| --------------- | ----------------------------------------------------------- |
| C c;            | 默认构造函数，构造空容器                                    |
| C c1(c2)        | 构造c2的拷贝c1                                              |
| C c(b, e)       | 构造c，将迭代器b和e指定的范围内的元素拷贝到c（array不支持） |
| C c{a, b, c...} | 列表初始化c                                                 |

| 赋值与swap        |                                               |
| ----------------- | --------------------------------------------- |
| c1=c2             | 将c1中的元素替换为c2中元素                    |
| c1 = {a, b, c...} | 将c1中的元素替换为列表中元素（不适用于array） |
| a.swap(b)         | 交换a和b的元素                                |
| swap(a, b)        | 与a.swap(b)等价                               |

| 大小         |                                         |
| ------------ | --------------------------------------- |
| c.size()     | c中元素的数组（不支持forward_list）     |
| c.max_size() | c中可保存的最大元素数目                 |
| c.empty()    | 若c中存储了元素，返回false,否则返回true |

| 添加/删除元素（不适用于array） |                             |
| ------------------------------ | --------------------------- |
| c.insert(args)                 | 将args中的元素拷贝进c       |
| c.emplace(inits)               | 使用inits构造c中的一个元素  |
| c.erase(args)                  | 删除args指定的元素          |
| c.clear()                      | 删除c中的所有元素，返回void |

| 关系运算符 |                                 |
| ---------- | ------------------------------- |
| ==, !=     | 所有容器都支持相等(不等运算符)  |
| <,<=,>,>=  | 关系运算符(无序关联容器不支持） |

| 获取迭代器           |                                           |
| -------------------- | ----------------------------------------- |
| c.begin(), c.end()   | 返回指向c的首元素和尾元素之后位置的迭代器 |
| c.cbengin(),c.cend() | 返回const_iterator                        |

| 反向容器的额外成员（不支持forward_list） |                                           |
| ---------------------------------------- | ----------------------------------------- |
| reverse_iterator                         | 按逆序寻址元素的迭代器                    |
| const_reverse_iterator                   | 不能修改元素的逆序迭代器                  |
| c.rbegin(), c.rend()                     | 返回指向c的尾元素和首元素之前位置的迭代器 |
| c.crbegin(), c.crend()                   | 返回const_reverse_iterator                |

（1）迭代器

标准库的迭代器允许我们访问容器中的元素，所有迭代器都是通过解引用运算符来实现这个操作。

一个迭代器返回由一对迭代器表示，两个迭代器分别指向同一个容器中的元素或者是尾元素之后的位置。它们标记了容器中元素的一个范围。

左闭合区间：[begin, end)

```cpp
while (begin !=end){
		*begin = val;
		++begin;
}
```

（2）容器类型成员

见概述

通过别名，可以在不了解容器中元素类型的情况下使用它。

（3）begin和end成员

begin是容器中第一个元素的迭代器

end是容器尾元素之后位置的迭代器

（4）容器定义和初始化

P290

```cpp
C c;            // 默认构造函数
C c1(c2)
C c1=c2
C c{a,b,c...}   // 列表初始化
C c={a,b,c...}
C c(b,e)        // c初始化为迭代器b和e指定范围中的元素的拷贝
// 只有顺序容器（不包括array）的构造函数才能接受大小参数
C seq(n)
C seq(n,t)
```

**将一个容器初始化为另一个容器的拷贝**:

当将一个容器初始化为另一个容器的拷贝时，两个容器的容器类型和元素类型都必须相同。

不过，当传递迭代器参数来拷贝一个范围时，就不要求容器类型相同，只要能将要拷贝的元素转换为要初始化的容器的元素类型即可。

**标注库array具有固定大小**:

不能对内置数组类型进行拷贝或对象赋值操作，但array并无此限制。P301

（5）赋值与swap

arrray类型不允许用花括号包围的值列表进行赋值。

```cpp
array<int, 10> a2={0}; //所有元素均为0
s2={0};  // 错误！
```

seq.assign(b,e)   // 将seq中的元素替换为迭代器b和e所表示的范围中的元素。迭代器b和e不能指向seq中的元素。

swap用于交换2个相同类型容器的内容。调用swap之后，两个容器中的元素将交换。

（6）容器大小操作

size 返回容器中元素的数目

empty 当size为0返回布尔值true，否则返回false

max_size 返回一个大于或等于该类型容器所能容纳的最大元素数的值

（7）关系运算符

关系运算符左右两边的元素符对象必须是相同类型的容器。

::: tip

只有当元素类型也定义了相应的比较运算符，才可以使用关系元素安抚来比较两个容器

:::

### 9.3 顺序容器操作

### 9.4 vector对象是如何增长的

### 9.5 额外的string操作

### 9.6 容器适配器
